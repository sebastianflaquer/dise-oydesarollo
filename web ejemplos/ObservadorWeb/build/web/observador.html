<html>
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <title>OBSERVADOR WEB </title>
    </head>
    
    <body>
        
        <script type="text/javascript">
            
            //Abro conexion SSE con el servlet observador
            //Este objeto recibe las notificaciones del servlet
            
            var observadorWeb = new EventSource("observadorServlet");
            
            //Se hay algun error de conexion (o si se pierde) se ejecuta este evento
            observadorWeb.onerror = function(evento) {
               alert("Sin conexion con el servidor");
               observadorWeb.close();
            };
            
            //Registro SSE para eventos de tipo "fecha"
            observadorWeb.addEventListener("fecha", function (evento){
               //Muestro la fecha que me manda el servlet
               document.getElementById("fecha").innerHTML = evento.data;
            },false);
            //Idem para la hora
            observadorWeb.addEventListener("hora", function (evento){
               document.getElementById("hora").innerHTML = evento.data;
            },false);
            
        
        </script>
        
        <h1>
        <span id="fecha"></span>
        <BR>
        <span id="hora"></span>
        </h1>
        
        
    </body>
</html>